---
layout: default
title: 首页
---
{% assign df = site.data.ui.date_format | default: "%b %-d, %Y" %}

<!-- 标签筛选器 -->
<div class="k-tag-filter">
  <div class="k-filter-controls">
    <button class="k-filter-btn active" data-tag="all">全部</button>
    {% assign all_tags = site.tags | sort %}
    {% for tag in all_tags %}
      {% assign tag_name = tag[0] %}
      {% assign tag_posts = tag[1] %}
      <button class="k-filter-btn" data-tag="{{ tag_name }}">{{ tag_name }} ({{ tag_posts.size }})</button>
    {% endfor %}
  </div>
</div>

<section class="k-list" id="posts-list">
  {% assign posts = site.posts | sort: "date" | reverse %}
  {% for post in posts %}
    <article class="k-row" data-tags="{{ post.tags | join: ',' }}">
      <div class="k-date">{{ post.date | date: df }}</div>
      <div class="k-maincol">
        <h2 class="k-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
        <p class="k-excerpt">
          {%- if post.excerpt -%}
            {{ post.excerpt | strip_html | strip_newlines | truncate: 180 }}
          {%- else -%}
            {{ post.content | strip_html | strip_newlines | truncate: 180 }}
          {%- endif -%}
        </p>
        {% if post.tags.size > 0 %}
        <div class="k-tags">
          {% for tag in post.tags %}
            <span class="k-tag">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </article>
  {% endfor %}
</section>
